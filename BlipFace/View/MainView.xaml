<Window x:Class="BlipFace.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:blp="clr-namespace:BlipFace"
        
        xmlns:blpSrv="clr-namespace:BlipFace.Service.Entities;assembly=BlipFace.Service"
        Title="BlipFace" Height="400" Width="350" 
        BorderThickness="0" FontSize="12" FontWeight="Normal" Loaded="Window_Loaded">

    <!--tymczasowo wrzucam jako resource, aby jakieś statusy się pojawiały w design view-->
    <Window.Resources>
        <x:ArrayExtension x:Key="tmpStatusList" Type="{x:Type blpSrv:BlipStatus}">
            <blpSrv:BlipStatus Id="1" Autor="ksirg" Content="Witaj blipie z nowej aplikacji blipface" StatusTime="" Medium="blipface"/>
            <blpSrv:BlipStatus Id="2" Autor="cinek" Content="Inny zaskakujący opis, ciekaw jestem reakcji ludzi na niego" StatusTime="" Medium="gadu-gadu"/>
            <blpSrv:BlipStatus Id="3" Autor="wacław" Content="W życiu piękne są tylko chwile" StatusTime="" Medium="blipface"/>
            <blpSrv:BlipStatus Id="4" Autor="ksirg" Content="Nie ma to jak nowa żarówka w lampce przy biurku dawno się tak z niczego nie ciszyłem" StatusTime="" Medium="www"/>
            <blpSrv:BlipStatus Id="1" Autor="ksirg" Content="Witaj blipie z nowej aplikacji blipface" StatusTime="" Medium="blipface"/>
            <blpSrv:BlipStatus Id="2" Autor="cinek" Content="Inny zaskakujący opis, ciekaw jestem reakcji ludzi na niego" StatusTime="" Medium="gadu-gadu"/>
            <blpSrv:BlipStatus Id="3" Autor="wacław" Content="W życiu piękne są tylko chwile" StatusTime="" Medium="blipface"/>
            <blpSrv:BlipStatus Id="4" Autor="ksirg" Content="Nie ma to jak nowa żarówka w lampce przy biurku dawno się tak z niczego nie ciszyłem" StatusTime="" Medium="www"/>

        </x:ArrayExtension>


    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition MinHeight="160"></RowDefinition>
            <RowDefinition MinHeight="90" MaxHeight="160"></RowDefinition>
        </Grid.RowDefinitions>
        <ListBox  Grid.Column="0" Grid.Row="0"  x:Name="lstbStatusList" Background="#ededed"
                  ScrollViewer.CanContentScroll="True" 
                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                  
                  ItemsSource="{StaticResource tmpStatusList}" FontSize="14"
                  HorizontalContentAlignment="Stretch">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="#8888dd" Margin="3" Padding="3" 
 BorderThickness="2" CornerRadius="5">
                        <Grid Background="AliceBlue">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />

                            </Grid.RowDefinitions>

                            <Label Content="{Binding Autor}"  Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"/>
                            <TextBlock TextWrapping="WrapWithOverflow" Text="{Binding Content}" FontWeight="Bold"  Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" />

                            <Label Content="{Binding Id}" Grid.Column="0" Grid.Row="2"/>

                            <Label Content="{Binding Medium}" Grid.Column="1" Grid.Row="2"/>
                        </Grid>
                        <!--
                        <StackPanel Background="AliceBlue">
                            <Label Content="{Binding Content}" FontWeight="Bold" />
                            <Label Content="{Binding Autor}" />
                            <Label Content="{Binding Id}" />
                        </StackPanel>
                        -->
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>

        </ListBox>

        <Grid Grid.Column="0" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition ></RowDefinition>
                <RowDefinition Height="40"></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>

            </Grid.ColumnDefinitions>

            <TextBox MaxHeight="80" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" x:Name="tbMessage" AcceptsReturn="True" Background="AliceBlue"  BorderThickness="3"
                   ClipToBounds="False" TextWrapping="Wrap"  TextChanged="tbMessage_TextChanged">
            </TextBox>

            <TextBlock  Grid.Row="1" Grid.Column="0" x:Name="tblCharLeft" FontSize="26" FontWeight="Bold"  Foreground="#a0a0a0" 
                Text="120">
            </TextBlock>
            <Button Grid.Column="1" Grid.Row="1" Margin="0,0,6,0" Name="btnSendBlip">Blip</Button>
        </Grid>

    </Grid>
</Window>
